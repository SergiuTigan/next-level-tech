<div class="bg-white py-10">
  <div class="mx-auto max-w-2xl px-6 lg:px-8">
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-gray-900">Edit Your Profile</h1>
      <p class="mt-2 text-sm text-gray-600">Update your personal information</p>
    </div>

    <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="space-y-6">
      <!-- Personal Information Section -->
      <div class="bg-white p-6 border border-gray-200 rounded-lg shadow-sm">
        <h2 class="text-xl font-semibold mb-4">Personal Information</h2>

        <!-- Email Field (Read-only) -->
        <div class="mb-4">
          <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            class="w-full px-3 py-2 border rounded bg-gray-100 text-gray-500 cursor-not-allowed"
            readonly
          >
          <p class="mt-1 text-xs text-gray-500">Email cannot be changed</p>
        </div>

        <!-- First Name Field -->
        <div class="mb-4">
          <label for="firstName" class="block text-sm font-medium text-gray-700">First Name</label>
          <input
            type="text"
            id="firstName"
            formControlName="firstName"
            class="w-full px-3 py-2 border rounded"
            [ngClass]="{'border-red-500': submitted && f['firstName'].errors, 'border-gray-300': !(submitted && f['firstName'].errors)}"
          >
          <div *ngIf="submitted && f['firstName'].errors" class="mt-1 text-sm text-red-500">
            <div *ngIf="f['firstName'].errors?.['required']">First name is required</div>
            <div *ngIf="f['firstName'].errors?.['minlength']">First name must be at least 2 characters</div>
          </div>
        </div>

        <!-- Last Name Field -->
        <div class="mb-4">
          <label for="lastName" class="block text-sm font-medium text-gray-700">Last Name</label>
          <input
            type="text"
            id="lastName"
            formControlName="lastName"
            class="w-full px-3 py-2 border rounded"
            [ngClass]="{'border-red-500': submitted && f['lastName'].errors, 'border-gray-300': !(submitted && f['lastName'].errors)}"
          >
          <div *ngIf="submitted && f['lastName'].errors" class="mt-1 text-sm text-red-500">
            <div *ngIf="f['lastName'].errors?.['required']">Last name is required</div>
            <div *ngIf="f['lastName'].errors?.['minlength']">Last name must be at least 2 characters</div>
          </div>
        </div>
      </div>

      <!-- Password Change Section -->
      <div class="bg-white p-6 border border-gray-200 rounded-lg shadow-sm">
        <h2 class="text-xl font-semibold mb-4">Change Password</h2>
        <p class="text-sm text-gray-600 mb-4">Leave blank if you don't want to change your password</p>

        <!-- Current Password Field -->
        <div class="mb-4">
          <label for="password" class="block text-sm font-medium text-gray-700">Current Password</label>
          <input
            type="password"
            id="password"
            formControlName="password"
            class="w-full px-3 py-2 border rounded"
            [ngClass]="{'border-red-500': submitted && f['password']?.errors, 'border-gray-300': !(submitted && f['password']?.errors)}"
          >
          <div *ngIf="submitted && f['password']?.errors" class="mt-1 text-sm text-red-500">
            <div *ngIf="f['password']?.errors?.['required']">Current password is required to change password</div>
            <div *ngIf="f['password']?.errors?.['invalidpassword']">Current password is incorrect</div>
          </div>
        </div>

        <!-- New Password Field -->
        <div class="mb-4">
          <label for="newPassword" class="block text-sm font-medium text-gray-700">New Password</label>
          <input
            type="password"
            id="newPassword"
            formControlName="newPassword"
            class="w-full px-3 py-2 border rounded"
            [ngClass]="{'border-red-500': submitted && f['newPassword']?.errors, 'border-gray-300': !(submitted && f['newPassword']?.errors)}"
          >
          <div *ngIf="submitted && f['newPassword']?.errors" class="mt-1 text-sm text-red-500">
            <div *ngIf="f['newPassword']?.errors?.['minlength']">Password must be at least 8 characters</div>
          </div>
        </div>

        <!-- Confirm New Password Field -->
        <div class="mb-4">
          <label for="confirmNewPassword" class="block text-sm font-medium text-gray-700">Confirm New Password</label>
          <input
            type="password"
            id="confirmNewPassword"
            formControlName="confirmNewPassword"
            class="w-full px-3 py-2 border rounded"
            [ngClass]="{'border-red-500': submitted && f['confirmNewPassword']?.errors, 'border-gray-300': !(submitted && f['confirmNewPassword']?.errors)}"
          >
          <div *ngIf="submitted && f['confirmNewPassword']?.errors" class="mt-1 text-sm text-red-500">
            <div *ngIf="f['confirmNewPassword']?.errors?.['passwordMismatch']">Passwords do not match</div>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="flex gap-4 pt-4">
        <button type="button" (click)="cancel()"
                class="inline-flex justify-center rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
          Cancel
        </button>
        <button type="submit"
                class="inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
          Save Changes
        </button>
      </div>
    </form>
  </div>
</div>
